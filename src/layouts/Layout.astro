---
// 1. ADATOK BETÖLTÉSE
import settings from '../config/settings.json';
import theme from '../config/theme.json';
import '../styles/global.css'; 
import Navbar from '../components/ui/Navbar.astro';

// 2. PROPS KEZELÉSE
interface Props {
  title?: string;
}

const { title = settings.site.title } = Astro.props;

// 3. SZÍNEK KINYERÉSE (Biztonsági mentés)
// Ha a JSON-ben valami hiányozna, ne omoljon össze a kód
const primary = theme.colors?.primary || '#66E6C1';
const secondary = theme.colors?.secondary || '#0F766E'; // ÚJ: Másodlagos szín
const accent = theme.colors?.accent || '#2DD4BF';       // ÚJ: Kiemelő szín
const custom = theme.colors?.custom_element || '#FF5733'; // ÚJ: A "Jolly Joker" színed!

const background = theme.colors?.background || '#0A151F';
const text = theme.colors?.text || '#FFFFFF';
---

<!doctype html>
<html lang="hu" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <style is:global define:vars={{ 
        'p-col': primary,
        's-col': secondary, // Bekötve
        'a-col': accent,    // Bekötve
        'c-col': custom,    // Bekötve (Ez a lényeg!)
        'bg-col': background,
        't-col': text,
        'h-font': theme.fonts?.heading || 'sans-serif',
        'b-font': theme.fonts?.body || 'sans-serif',
        'rad': theme.ui?.border_radius || '12px'
    }}>
      :root {
        /* CSS Változók létrehozása a HTML-hez */
        --primary: var(--p-col);
        --secondary: var(--s-col);
        --accent: var(--a-col);
        --custom: var(--c-col); /* Itt jön létre a var(--custom)! */
        
        --background: var(--bg-col);
        --text: var(--t-col);
        --font-heading: var(--h-font);
        --font-body: var(--b-font);
        --radius: var(--rad);
      }

      html {
        font-family: var(--font-body), system-ui, sans-serif;
        background-color: var(--background);
        color: var(--text);
      }

      body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        min-height: 100vh;
      }

      h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-heading);
      }

      /* Biztonsági törlés: Ha bárhol maradt volna piros keret, ez kioltja */
      * {
        border-color: transparent; 
        outline: none;
      }
      
      /* Kivétel: Ha direktbe border-t akarsz a custom HTML-ben, azt engedjük */
      [style*="border"] {
          border-color: initial;
      }
    </style>
  </head>
  
  <body class="bg-dark text-light antialiased selection:bg-primary selection:text-dark">
    
    <Navbar />

    <main>
      <slot />
    </main>

  </body>
</html>